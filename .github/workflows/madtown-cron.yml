# .github/workflows/madtown-cron.yml
name: MADTOWN CLIPS Cron Jobs

on:
  schedule:
    # æ¯æ™‚0åˆ†ã«å‹•ç”»å–å¾—
    - cron: "0 * * * *"
    # æ¯æ™‚15åˆ†ã«ã‚·ãƒ§ãƒ¼ãƒˆåˆ¤å®š
    - cron: "15 * * * *"
    # 6æ™‚é–“ã”ã¨ã«å‰Šé™¤ãƒã‚§ãƒƒã‚¯
    - cron: "0 */6 * * *"
  workflow_dispatch:  # æ‰‹å‹•å®Ÿè¡Œãƒœã‚¿ãƒ³

jobs:
  run-crons:
    runs-on: ubuntu-latest

    steps:
      - name: ğŸ” Fetch Videos Diff
        run: |
          echo "Running fetch-videos-diff..."
          curl -s -o /dev/null -w "%{http_code}\n" https://madtown-clips.vercel.app/api/fetch-videos-diff

      - name: ğŸ§© Update Shorts
        run: |
          echo "Running update-is-short-html..."
          curl -s -o /dev/null -w "%{http_code}\n" https://madtown-clips.vercel.app/api/update-is-short-html

      - name: ğŸ§¹ Cleanup Deleted Videos
        run: |
          echo "Running cleanup-deleted-videos..."
          curl -s -o /dev/null -w "%{http_code}\n" https://madtown-clips.vercel.app/api/cleanup-deleted-videos
