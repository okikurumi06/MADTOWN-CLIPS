# .github/workflows/madtown-cron.yml
name: MADTOWN CLIPS Cron Jobs

on:
  schedule:
    # ğŸ”„ æ–°ç€å‹•ç”»å–å¾—ï¼š6æ™‚é–“ã”ã¨ï¼ˆUTCï¼‰
    # JSTã§ã¯ 09:00 / 15:00 / 21:00 / 03:00 ã«å®Ÿè¡Œ
    - cron: "0 */6 * * *"

    # ğŸï¸ ã‚·ãƒ§ãƒ¼ãƒˆå‹•ç”»åˆ¤å®šï¼š3æ™‚é–“ã”ã¨ï¼ˆUTCï¼‰
    # JSTã§ã¯ 09:15 / 12:15 / 15:15 / 18:15 / 21:15 / 00:15 / 03:15 / 06:15 ã«å®Ÿè¡Œ
    - cron: "15 */3 * * *"

    # ğŸ§¹ å‰Šé™¤ãƒã‚§ãƒƒã‚¯ï¼š6æ™‚é–“ã”ã¨
    - cron: "0 */6 * * *"

  # â–¶ æ‰‹å‹•å®Ÿè¡Œã‚‚å¯èƒ½
  workflow_dispatch:

jobs:
  run-crons:
    runs-on: ubuntu-latest

    steps:
      - name: ğŸ” Fetch Videos Diffï¼ˆ6æ™‚é–“ã”ã¨ï¼‰
        run: |
          echo "Running fetch-videos-diff..."
          curl -s -o /dev/null -w "%{http_code}\n" https://madtown-clips.vercel.app/api/fetch-videos-diff

      - name: ğŸ§© Update Shortsï¼ˆ3æ™‚é–“ã”ã¨ï¼‰
        run: |
          echo "Running update-is-short-html..."
          curl -s -o /dev/null -w "%{http_code}\n" https://madtown-clips.vercel.app/api/update-is-short-html

      - name: ğŸ§¹ Cleanup Deleted Videosï¼ˆ6æ™‚é–“ã”ã¨ï¼‰
        run: |
          echo "Running cleanup-deleted-videos..."
          curl -s -o /dev/null -w "%{http_code}\n" https://madtown-clips.vercel.app/api/cleanup-deleted-videos
